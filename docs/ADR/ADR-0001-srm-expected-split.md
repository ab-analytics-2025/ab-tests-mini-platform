# ADR-0001: SRM проверяется относительно expected_split (иначе skipped)

## Status
Accepted

## Context
Для проверки Sample Ratio Mismatch (SRM) нужна **ожидаемая** доля пользователей в каждой группе.
В датасетах с неравным сплитом (например ~96/4) проверка SRM относительно 50/50 даёт ложный fail.

## Decision
- Добавляем параметр `expected_split` (пример: `ad=0.96,psa=0.04`).
- Если `expected_split` задан → SRM считается строго относительно него (χ²), результат `pass/fail`.
- Если `expected_split` НЕ задан:
  - если фактический сплит близок к равному → допускаем проверку относительно равного,
  - если фактический сплит явно неравный → SRM = `skipped` и в отчёте пишем, что нужен `expected_split`.

## Consequences
- Избегаем ложного “провала дизайна” на неравной аллокации.
- Контракт SRM становится явным и воспроизводимым.

## Alternatives considered
- Всегда проверять относительно 50/50: отвергнуто как некорректное для неравного дизайна.
- Всегда ставить fail и писать предупреждение: отвергнуто, т.к. ломает рекомендацию.
